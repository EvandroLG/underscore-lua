<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Underscore-lua : Underscore is a utility-belt library for Lua " />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Underscore-lua</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/jtarchie/underscore-lua">View on GitHub</a>

          <h1 id="project_title">Underscore-lua</h1>
          <h2 id="project_tagline">Underscore is a utility-belt library for Lua </h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/jtarchie/underscore-lua/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/jtarchie/underscore-lua/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <p><em>NOTE</em>: This is a 1-to-1 port of the orignal <a href="http://underscorejs.org/">Underscore</a> for Javscript. Lua does not have the same concept of run-time loop, so anything functionality that relied on setTimeout has been removed.</p>

<h1>Introduction</h1>

<p><a href="https://github.com/jtarchie/underscore-lua">underscore-lua</a> is a utility-belt library for Lua that provides a lot of the functional programming support that you would expect in or Ruby's Enumerable.</p>

<p>The project is hosted on <a href="https://github.com/jtarchie/underscore-lua">GitHub</a>. You can report bugs and discuss features on the <a href="https://github.com/jtarchie/underscore-lua/issues">issues page</a>, or send tweets to <a href="https://github.com/jtarchie" class="user-mention">@jtarchie</a>.</p>

<h1>Tests</h1>

<p>The tests are written using <a href="http://olivinelabs.com/busted/">busted</a>. Run <code>busted</code> from the root of the source tree to run all the tests.</p>

<h1>Table of Contents</h1>

<ul>
<li><a href="#collection-functions-arrays-or-objects">Collection</a></li>
<li><a href="#arrays">Arrays</a></li>
<li><a href="#objects">Objects</a></li>
<li><a href="#string">String</a></li>
<li><a href="#functions">Functions</a></li>
<li><a href="#utility">Utility</a></li>
<li><a href="#chaining">Chaining</a></li>
<li><a href="#changelog">Changelog</a></li>
</ul><h1>Collection functions (Arrays or Objects)</h1>

<h2>each</h2>

<p><code>_.each(list, iterator)</code></p>

<p>Iterates over a list of elements, yielding each in turn to an iterator function. Each invocation of iterator is called with three arguments: (element, index, list). If list is a Lua object, iterator's arguments will be (value, key, list).</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">each</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">},</span> <span class="nb">print</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="nb">print</span> <span class="n">each</span> <span class="n">number</span> <span class="k">in</span> <span class="n">turn</span><span class="o">...</span>
<span class="n">_</span><span class="p">.</span><span class="n">each</span><span class="p">({</span><span class="n">one</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">two</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">three</span><span class="o">=</span><span class="mi">3</span><span class="p">},</span> <span class="k">function</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span> <span class="nb">print</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="k">end</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="nb">print</span> <span class="n">each</span> <span class="n">number</span> <span class="k">in</span> <span class="n">turn</span><span class="o">...</span>
</pre></div>

<h2>map</h2>

<p><code>_.map(list, iterator)</code> Alias: collect</p>

<p>Produces a new array of values by mapping each value in list through a transformation function (iterator). If list is a Lua object, iterator's arguments will be (value, key, list).</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">map</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">},</span> <span class="k">function</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="k">return</span> <span class="n">num</span> <span class="o">*</span> <span class="mi">3</span> <span class="k">end</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">}</span>
<span class="n">_</span><span class="p">.</span><span class="n">map</span><span class="p">({</span><span class="n">one</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">two</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">three</span><span class="o">=</span><span class="mi">3</span><span class="p">},</span> <span class="k">function</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span> <span class="k">return</span> <span class="n">num</span> <span class="o">*</span> <span class="mi">3</span> <span class="k">end</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">}</span>
</pre></div>

<h2>reduce</h2>

<p><code>_.reduce(list, iterator, memo)</code> Aliases: inject, foldl </p>

<p>Also known as inject and foldl, reduce boils down a list of values into a single value. Memo is the initial state of the reduction, and each successive step of it should be returned by iterator. The iterator is passed four arguments: the memo, then the value and index (or key) of the iteration, and finally a reference to the entire list.</p>

<div class="highlight"><pre><span class="kd">local</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">_</span><span class="p">.</span><span class="n">reduce</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">},</span> <span class="k">function</span><span class="p">(</span><span class="n">memo</span><span class="p">,</span> <span class="n">num</span><span class="p">)</span> <span class="k">return</span> <span class="n">memo</span> <span class="o">+</span> <span class="n">num</span> <span class="k">end</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="mi">6</span>
</pre></div>

<h2>reduceRight</h2>

<p><code>_.reduceRight(list, iterator, memo)</code> Alias: foldr </p>

<p>The right-associative version of reduce. Foldr is not as useful in Lua as it would be in a language with lazy evaluation.</p>

<div class="highlight"><pre><span class="kd">local</span> <span class="n">list</span> <span class="o">=</span> <span class="p">{{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">},</span> <span class="p">{</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">}}</span>
<span class="kd">local</span> <span class="n">flat</span> <span class="o">=</span> <span class="n">_</span><span class="p">.</span><span class="n">reduceRight</span><span class="p">(</span><span class="n">list</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="k">return</span> <span class="n">_</span><span class="p">.</span><span class="n">concat</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="k">end</span><span class="p">,</span> <span class="p">{})</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">}</span>
</pre></div>

<h2>find</h2>

<p><code>_.find(list, iterator)</code> Alias: detect</p>

<p>Looks through each value in the list, returning the first one that passes a truth test (iterator). The function returns as soon as it finds an acceptable element, and doesn't traverse the entire list.</p>

<div class="highlight"><pre><span class="kd">local</span> <span class="n">even</span> <span class="o">=</span> <span class="n">_</span><span class="p">.</span><span class="n">find</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">},</span> <span class="k">function</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="k">return</span> <span class="n">num</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">end</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="mi">2</span>
</pre></div>

<h2>filter</h2>

<p><code>_.filter(list, iterator)</code> Alias: select</p>

<p>Looks through each value in the list, returning an array of all the values that pass a truth test (iterator). Delegates to the native filter method, if it exists.</p>

<div class="highlight"><pre><span class="kd">local</span> <span class="n">evens</span> <span class="o">=</span> <span class="n">_</span><span class="p">.</span><span class="n">filter</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">},</span> <span class="k">function</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="k">return</span> <span class="n">num</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">end</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">}</span>
</pre></div>

<h2>where</h2>

<p><code>_.where(list, properties)</code></p>

<p>Looks through each value in the list, returning an array of all the values that contain all of the key-value pairs listed in properties.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">where</span><span class="p">(</span><span class="n">listOfPlays</span><span class="p">,</span> <span class="p">{</span><span class="n">author</span><span class="o">=</span><span class="s2">"</span><span class="s">Shakespeare"</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="mi">1611</span><span class="p">})</span>
<span class="o">=&gt;</span> <span class="p">{{</span><span class="n">title</span><span class="o">=</span><span class="s2">"</span><span class="s">Cymbeline"</span><span class="p">,</span> <span class="n">author</span><span class="o">=</span><span class="s2">"</span><span class="s">Shakespeare"</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="mi">1611</span><span class="p">},</span>
    <span class="p">{</span><span class="n">title</span><span class="o">=</span><span class="s2">"</span><span class="s">The Tempest"</span><span class="p">,</span> <span class="n">author</span><span class="o">=</span><span class="s2">"</span><span class="s">Shakespeare"</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="mi">1611</span><span class="p">}}</span>
</pre></div>

<h2>reject</h2>

<p><code>_.reject(list, iterator)</code></p>

<p>Returns the values in list without the elements that the truth test (iterator) passes. The opposite of filter.</p>

<div class="highlight"><pre><span class="kd">local</span> <span class="n">odds</span> <span class="o">=</span> <span class="n">_</span><span class="p">.</span><span class="n">reject</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">},</span> <span class="k">function</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="k">return</span> <span class="n">num</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">end</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">}</span>
</pre></div>

<h2>all</h2>

<p><code>_.all(list, iterator)</code> Alias: every </p>

<p>Returns true if all of the values in the list pass the iterator truth test.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">all</span><span class="p">({</span><span class="kc">true</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="kc">nil</span><span class="p">,</span> <span class="s1">'</span><span class="s">yes'</span><span class="p">},</span> <span class="n">_</span><span class="p">.</span><span class="n">identity</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="kc">false</span>
</pre></div>

<h2>contains</h2>

<p><code>_.contains(list, value)</code> Alias: include </p>

<p>Returns true if the value is present in the list. Uses indexOf internally, if list is an Array.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">contains</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">},</span> <span class="mi">3</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="kc">true</span>
</pre></div>

<h2>invoke</h2>

<p><code>_.invoke(list, methodName, [*arguments])</code> </p>

<p>Calls the method named by methodName on each value in the list. Any extra arguments passed to invoke will be forwarded on to the method invocation.</p>

<div class="highlight"><pre><span class="kd">local</span> <span class="n">dog</span> <span class="o">=</span> <span class="p">{</span><span class="n">says</span><span class="o">=</span><span class="k">function</span><span class="p">()</span> <span class="k">return</span> <span class="s2">"</span><span class="s">woof"</span> <span class="k">end</span><span class="p">}</span>
<span class="kd">local</span> <span class="n">cat</span> <span class="o">=</span> <span class="p">{</span><span class="n">says</span><span class="o">=</span><span class="k">function</span><span class="p">()</span> <span class="k">return</span> <span class="s2">"</span><span class="s">meow"</span> <span class="k">end</span><span class="p">}</span>
<span class="kd">local</span> <span class="n">cow</span> <span class="o">=</span> <span class="p">{</span><span class="n">says</span><span class="o">=</span><span class="k">function</span><span class="p">()</span> <span class="k">return</span> <span class="s2">"</span><span class="s">moo"</span> <span class="k">end</span><span class="p">}</span>
<span class="n">_</span><span class="p">.</span><span class="n">invoke</span><span class="p">({</span><span class="n">dog</span><span class="p">,</span> <span class="n">cat</span><span class="p">,</span> <span class="n">cow</span><span class="p">},</span> <span class="s1">'</span><span class="s">says'</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="s1">'</span><span class="s">woof'</span><span class="p">,</span> <span class="s1">'</span><span class="s">meow'</span><span class="p">,</span> <span class="s1">'</span><span class="s">moo'</span><span class="p">}</span>
</pre></div>

<h2>pluck</h2>

<p><code>_.pluck(list, propertyName)</code></p>

<p>A convenient version of what is perhaps the most common use-case for map: extracting a list of property values.</p>

<div class="highlight"><pre><span class="kd">local</span> <span class="n">stooges</span> <span class="o">=</span> <span class="p">{{</span><span class="n">name</span><span class="o">=</span><span class="s1">'</span><span class="s">moe'</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">40</span><span class="p">},</span> <span class="p">{</span><span class="n">name</span><span class="o">=</span><span class="s1">'</span><span class="s">larry'</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">50</span><span class="p">},</span> <span class="p">{</span><span class="n">name</span><span class="o">=</span><span class="s1">'</span><span class="s">curly'</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">60</span><span class="p">}}</span>
<span class="n">_</span><span class="p">.</span><span class="n">pluck</span><span class="p">(</span><span class="n">stooges</span><span class="p">,</span> <span class="s1">'</span><span class="s">name'</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="s2">"</span><span class="s">moe"</span><span class="p">,</span> <span class="s2">"</span><span class="s">larry"</span><span class="p">,</span> <span class="s2">"</span><span class="s">curly"</span><span class="p">}</span>
</pre></div>

<h2>max</h2>

<p><code>_.max(list, [iterator])</code></p>

<p>Returns the maximum value in list. If iterator is passed, it will be used on each value to generate the criterion by which the value is ranked.</p>

<div class="highlight"><pre><span class="kd">local</span> <span class="n">stooges</span> <span class="o">=</span> <span class="p">{{</span><span class="n">name</span><span class="o">=</span><span class="s1">'</span><span class="s">moe'</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">40</span><span class="p">},</span> <span class="p">{</span><span class="n">name</span><span class="o">=</span><span class="s1">'</span><span class="s">larry'</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">50</span><span class="p">},</span> <span class="p">{</span><span class="n">name</span><span class="o">=</span><span class="s1">'</span><span class="s">curly'</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">60</span><span class="p">}}</span>
<span class="n">_</span><span class="p">.</span><span class="n">max</span><span class="p">(</span><span class="n">stooges</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="n">stooge</span><span class="p">)</span> <span class="k">return</span> <span class="n">stooge</span><span class="p">.</span><span class="n">age</span> <span class="k">end</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="n">name</span><span class="o">=</span><span class="s1">'</span><span class="s">curly'</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">60</span><span class="p">}</span>
</pre></div>

<h2>min</h2>

<p><code>_.min(list, [iterator])</code></p>

<p>Returns the minimum value in list. If iterator is passed, it will be used on each value to generate the criterion by which the value is ranked.</p>

<div class="highlight"><pre><span class="kd">local</span> <span class="n">numbers</span> <span class="o">=</span> <span class="p">{</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1000</span><span class="p">}</span>
<span class="n">_</span><span class="p">.</span><span class="n">min</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="mi">2</span>
</pre></div>

<h2>sortBy</h2>

<p><code>_.sortBy(list, iterator)</code></p>

<p>Returns a sorted copy of list, ranked in ascending order by the results of running each value through iterator. Iterator may also be the string name of the property to sort by (eg. length).</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">sortBy</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">},</span> <span class="k">function</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="k">return</span> <span class="nb">math.sin</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="k">end</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">}</span>
</pre></div>

<h2>groupBy</h2>

<p><code>_.groupBy(list, iterator)</code></p>

<p>Splits a collection into sets, grouped by the result of running each value through iterator. If iterator is a string instead of a function, groups by the property named by iterator on each of the values.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">groupBy</span><span class="p">({</span><span class="mf">1.3</span><span class="p">,</span> <span class="mf">2.1</span><span class="p">,</span> <span class="mf">2.4</span><span class="p">},</span> <span class="k">function</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="k">return</span> <span class="nb">math.floor</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="k">end</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="mi">1</span><span class="o">=</span><span class="p">{</span><span class="mf">1.3</span><span class="p">},</span> <span class="mi">2</span><span class="o">=</span><span class="p">{</span><span class="mf">2.1</span><span class="p">,</span> <span class="mf">2.4</span><span class="p">}</span>
</pre></div>

<h2>countBy</h2>

<p><code>_.countBy(list, iterator)</code></p>

<p>Sorts a list into groups and returns a count for the number of objects in each group. Similar to groupBy, but instead of returning a list of values, returns a count for the number of values in that group.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">countBy</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">},</span> <span class="k">function</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> 
  <span class="k">if</span> <span class="n">num</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">then</span>
    <span class="k">return</span> <span class="s1">'</span><span class="s">even'</span>
  <span class="k">else</span>
    <span class="k">return</span> <span class="s1">'</span><span class="s">odd'</span>
  <span class="k">end</span>
<span class="k">end</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="n">odd</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">even</span><span class="o">=</span><span class="mi">2</span><span class="p">}</span>
</pre></div>

<h2>shuffle</h2>

<p><code>_.shuffle(list)</code></p>

<p>Returns a shuffled copy of the list, using a version of the Fisher-Yates shuffle.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">shuffle</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">})</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">}</span>
</pre></div>

<h2>toArray</h2>

<p><code>_.toArray(list)</code></p>

<p>Converts the list (anything that can be iterated over), into a real Array. Useful for transmuting the arguments object.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">toArray</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">}</span>
</pre></div>

<h2>size</h2>

<p><code>_.size(list)</code></p>

<p>Return the number of values in the list.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">size</span><span class="p">({</span><span class="n">one</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">two</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">three</span><span class="o">=</span><span class="mi">3</span><span class="p">})</span>
<span class="o">=&gt;</span> <span class="mi">3</span>
</pre></div>

<h1>Arrays</h1>

<h2>first</h2>

<p><code>_.first(array, [n])</code> Alias: head, take </p>

<p>Returns the first element of an array. Passing n will return the first n elements of the array.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">first</span><span class="p">({</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">})</span>
<span class="o">=&gt;</span> <span class="mi">5</span>
</pre></div>

<h2>initial</h2>

<p><code>_.initial(array, [n])</code></p>

<p>Returns everything but the last entry of the array. Especially useful on variable arguments object. Pass n to exclude the last n elements from the result.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">initial</span><span class="p">({</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">})</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">}</span>
</pre></div>

<h2>last</h2>

<p><code>_.last(array, [n])</code></p>

<p>Returns the last element of an array. Passing n will return the last n elements of the array.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">last</span><span class="p">({</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">})</span>
<span class="o">=&gt;</span> <span class="mi">1</span>
</pre></div>

<h2>rest</h2>

<p><code>_.rest(array, [index])</code> Alias: tail, drop </p>

<p>Returns the rest of the elements in an array. Pass an index to return the values of the array from that index onward.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">rest</span><span class="p">({</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">})</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">}</span>
</pre></div>

<h2>compact</h2>

<p><code>_.compact(array)</code></p>

<p>Returns a copy of the array with all falsy values removed. In Lua, false is the only falsy value.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">compact</span><span class="p">({</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">'</span><span class="s">'</span><span class="p">,</span> <span class="mi">3</span><span class="p">})</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">'</span><span class="s">'</span><span class="p">,</span> <span class="mi">3</span><span class="p">}</span>
</pre></div>

<h2>flatten</h2>

<p><code>_.flatten(array, [shallow])</code></p>

<p>Flattens a nested array (the nesting can be to any depth). If you pass shallow, the array will only be flattened a single level.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">flatten</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span> <span class="p">{</span><span class="mi">2</span><span class="p">},</span> <span class="p">{</span><span class="mi">3</span><span class="p">,</span> <span class="p">{{</span><span class="mi">4</span><span class="p">}}}})</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">}</span>
<span class="n">_</span><span class="p">.</span><span class="n">flatten</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span> <span class="p">{</span><span class="mi">2</span><span class="p">},</span> <span class="p">{</span><span class="mi">3</span><span class="p">,</span> <span class="p">{{</span><span class="mi">4</span><span class="p">}}}},</span> <span class="kc">true</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="p">{{</span><span class="mi">4</span><span class="p">}}}</span>
</pre></div>

<h2>without</h2>

<p><code>_.without(array, [*values])</code></p>

<p>Returns a copy of the array with all instances of the values removed.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">without</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">},</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">}</span>
</pre></div>

<h2>union</h2>

<p><code>_.union(*arrays)</code></p>

<p>Computes the union of the passed-in arrays: the list of unique items, in order, that are present in one or more of the arrays.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">union</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">},</span> <span class="p">{</span><span class="mi">101</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">},</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">})</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">10</span><span class="p">}</span>
</pre></div>

<h2>intersection</h2>

<p><code>_.intersection(*arrays)</code></p>

<p>Computes the list of values that are the intersection of all the arrays. Each value in the result is present in each of the arrays.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">intersection</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">},</span> <span class="p">{</span><span class="mi">101</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">},</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">})</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">}</span>
</pre></div>

<h2>difference</h2>

<p><code>_.difference(array, *others)</code></p>

<p>Similar to without, but returns the values from array that are not present in the other arrays.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">difference</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">},</span> <span class="p">{</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">})</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">}</span>
</pre></div>

<h2>uniq</h2>

<p><code>_.uniq(array, [isSorted], [iterator])</code> Alias: unique</p>

<p>Produces a duplicate-free version of the array, using === to test object equality. If you know in advance that the array is sorted, passing true for isSorted will run a much faster algorithm. If you want to compute unique items based on a transformation, pass an iterator function.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">uniq</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">})</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">}</span>
</pre></div>

<h2>zip</h2>

<p><code>_.zip(*arrays)</code></p>

<p>Merges together the values of each of the arrays with the values at the corresponding position. Useful when you have separate data sources that are coordinated through matching array indexes. If you're working with a matrix of nested arrays, zip.apply can transpose the matrix in a similar fashion.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">zip</span><span class="p">({</span><span class="s1">'</span><span class="s">moe'</span><span class="p">,</span> <span class="s1">'</span><span class="s">larry'</span><span class="p">,</span> <span class="s1">'</span><span class="s">curly'</span><span class="p">},</span> <span class="p">{</span><span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">50</span><span class="p">},</span> <span class="p">{</span><span class="kc">true</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="kc">false</span><span class="p">})</span>
<span class="o">=&gt;</span> <span class="p">{{</span><span class="s2">"</span><span class="s">moe"</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="kc">true</span><span class="p">},</span> <span class="p">{</span><span class="s2">"</span><span class="s">larry"</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="kc">false</span><span class="p">},</span> <span class="p">{</span><span class="s2">"</span><span class="s">curly"</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="kc">false</span><span class="p">}}</span>
</pre></div>

<h2>object</h2>

<p><code>_.object(list, [values])</code></p>

<p>Converts arrays into objects. Pass either a single list of (key, value) pairs, or a list of keys, and a list of values.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">object</span><span class="p">({</span><span class="s1">'</span><span class="s">moe'</span><span class="p">,</span> <span class="s1">'</span><span class="s">larry'</span><span class="p">,</span> <span class="s1">'</span><span class="s">curly'</span><span class="p">},</span> <span class="p">{</span><span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">50</span><span class="p">})</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="n">moe</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">larry</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">curly</span><span class="o">=</span><span class="mi">50</span><span class="p">}</span>
<span class="n">_</span><span class="p">.</span><span class="n">object</span><span class="p">({{</span><span class="s1">'</span><span class="s">moe'</span><span class="p">,</span> <span class="mi">30</span><span class="p">},</span> <span class="p">{</span><span class="s1">'</span><span class="s">larry'</span><span class="p">,</span> <span class="mi">40</span><span class="p">},</span> <span class="p">{</span><span class="s1">'</span><span class="s">curly'</span><span class="p">,</span> <span class="mi">50</span><span class="p">}})</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="n">moe</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">larry</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">curly</span><span class="o">=</span><span class="mi">50</span><span class="p">}</span>
</pre></div>

<h2>indexOf</h2>

<p><code>_.indexOf(array, value, [isSorted])</code></p>

<p>Returns the index at which value can be found in the array, or 0 if value is not present in the array. Uses the native indexOf function unless it's missing. If you're working with a large array, and you know that the array is already sorted, pass true for isSorted to use a faster binary search ... or, pass a number as the third argument in order to look for the first matching value in the array after the given index.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">indexOf</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">},</span> <span class="mi">2</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="mi">1</span>
</pre></div>

<h2>lastIndexOf</h2>

<p><code>_.lastIndexOf(array, value, [fromIndex])</code></p>

<p>Returns the index of the last occurrence of value in the array, or 0 if value is not present. Uses the native lastIndexOf function if possible. Pass fromIndex to start your search at a given index.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">lastIndexOf</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">},</span> <span class="mi">2</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="mi">4</span>
</pre></div>

<h2>range</h2>

<p><code>_.range([start], stop, [step])</code></p>

<p>A function to create flexibly-numbered lists of integers, handy for each and map loops. start, if omitted, defaults to 0; step defaults to 1. Returns a list of integers from start to stop, incremented (or decremented) by step, exclusive.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">}</span>
<span class="n">_</span><span class="p">.</span><span class="n">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">}</span>
<span class="n">_</span><span class="p">.</span><span class="n">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">25</span><span class="p">}</span>
<span class="n">_</span><span class="p">.</span><span class="n">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="o">-</span><span class="mi">6</span><span class="p">,</span> <span class="o">-</span><span class="mi">7</span><span class="p">,</span> <span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="o">-</span><span class="mi">9</span><span class="p">}</span>
<span class="n">_</span><span class="p">.</span><span class="n">range</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="p">{}</span> 
</pre></div>

<h2>pop</h2>

<p><code>_.pop(array)</code></p>

<p>Removes the last element from an array and returns that value.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">pop</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">})</span>
<span class="o">=&gt;</span> <span class="mi">4</span>
</pre></div>

<h2>push</h2>

<p><code>_.push(array, [elements])</code></p>

<p>Adds the list of elements on to the end of an array.</p>

<div class="highlight"><pre><span class="kd">local</span> <span class="n">array</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">}</span>
<span class="n">_</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">}</span>
<span class="o">=&gt;</span> <span class="n">array</span> <span class="o">==</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">}</span>
</pre></div>

<h2>shift</h2>

<p><code>_.shift(array)</code></p>

<p>Removes the last element from an array and returns that value.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">shift</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">})</span>
<span class="o">=&gt;</span> <span class="mi">1</span>
</pre></div>

<h2>unshift</h2>

<p><code>_.unshift(array, [elements])</code></p>

<p>Adds the list of elements on to the end of an array.</p>

<div class="highlight"><pre><span class="kd">local</span> <span class="n">array</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">}</span>
<span class="n">_</span><span class="p">.</span><span class="n">unshift</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">}</span>
<span class="o">=&gt;</span> <span class="n">array</span> <span class="o">==</span> <span class="p">{</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">}</span>
</pre></div>

<h2>slice</h2>

<p><code>_.slice(array, begin, [end])</code></p>

<p>Returns a portion of the array that starts from begin and returning all the elemtns to the end of the array. If end is provided then it provideds the elements to that position.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">slice</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">},</span> <span class="mi">4</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">}</span>
<span class="n">_</span><span class="p">.</span><span class="n">slice</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">},</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">}</span>
</pre></div>

<h2>sort</h2>

<p><code>_.sort(array, [compareFunction])</code></p>

<p>Sorts the elements in the array based on the <code>tostring</code> value of the element. For numerical values, this puts "80" before "9" in their lexical form.</p>

<p>With the compareFunction, the elements are sorted based on the returned value. This relies on Lua's underlying <code>table.sort</code> so the comparison relies the value being compared as less than or grater than.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">sort</span><span class="p">({</span><span class="s2">"</span><span class="s">how"</span><span class="p">,</span><span class="s2">"</span><span class="s">are"</span><span class="p">,</span><span class="s2">"</span><span class="s">you"</span><span class="p">,</span><span class="s2">"</span><span class="s">today"</span><span class="p">})</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="s2">"</span><span class="s">are"</span><span class="p">,</span><span class="s2">"</span><span class="s">how"</span><span class="p">,</span><span class="s2">"</span><span class="s">today"</span><span class="p">,</span><span class="s2">"</span><span class="s">you"</span><span class="p">}</span>
<span class="n">_</span><span class="p">.</span><span class="n">sort</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">90</span><span class="p">})</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">90</span><span class="p">}</span>
</pre></div>

<h2>concat</h2>

<p><code>_.concat(value1, value2, ..., arrayn)</code></p>

<p>Creates a new array by concatenating the values passed in. It does not alter the original versions of the values passed in.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">concat</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">}</span>
<span class="n">_</span><span class="p">.</span><span class="n">concat</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">},{</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">})</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">}</span>
</pre></div>

<h2>join</h2>

<p><code>_.join(array, [separator])</code></p>

<p>Joins the elements of an array into a string. By default the separator is a blank string. If a separator is passed then it will be used as the string that separates the elements in the string.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">join</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">})</span>
<span class="o">=&gt;</span> <span class="s2">"</span><span class="s">12345"</span>
<span class="n">_</span><span class="p">.</span><span class="n">join</span><span class="p">({</span><span class="s2">"</span><span class="s">Hello"</span><span class="p">,</span> <span class="s2">"</span><span class="s">world"</span><span class="p">},</span> <span class="s2">"</span><span class="s">, "</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="s2">"</span><span class="s">Hello, world"</span>
</pre></div>

<h2>splice</h2>

<p><code>_.splice(array, index, [howMany, element1, element2, .., elementN])</code></p>

<p>Changes the content of an array, adding new elements while removing old elements. Will start changing elements starting at index and remove howMany elements from that position. Elements can be provided to replace the elements that are being removed.</p>

<p>If hasMany is not specified it remove all elements to the end of the array.</p>

<div class="highlight"><pre><span class="kd">local</span> <span class="n">kids</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'</span><span class="s">bart'</span><span class="p">,</span> <span class="s1">'</span><span class="s">marsha'</span><span class="p">,</span> <span class="s1">'</span><span class="s">maggie'</span><span class="p">}</span>
<span class="n">_</span><span class="p">.</span><span class="n">splice</span><span class="p">(</span><span class="n">kids</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">'</span><span class="s">lisa'</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="s1">'</span><span class="s">marsha'</span><span class="p">}</span>
<span class="n">array</span> <span class="o">==</span> <span class="p">{</span><span class="s1">'</span><span class="s">bart'</span><span class="p">,</span> <span class="s1">'</span><span class="s">lisa'</span><span class="p">,</span> <span class="s1">'</span><span class="s">maggie'</span><span class="p">}</span>
</pre></div>

<h1>Functions</h1>

<h2>memoize</h2>

<p><code>_.memoize(function, [hashFunction])</code></p>

<p>Memoizes a given function by caching the computed result. Useful for speeding up slow-running computations. If passed an optional hashFunction, it will be used to compute the hash key for storing the result, based on the arguments to the original function. The default hashFunction just uses the first argument to the memoized function as the key.</p>

<div class="highlight"><pre><span class="kd">local</span> <span class="n">fibonacci</span> <span class="o">=</span> <span class="n">_</span><span class="p">.</span><span class="n">memoize</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="k">then</span>
    <span class="k">return</span> <span class="n">n</span>
  <span class="k">else</span> 
    <span class="k">return</span> <span class="n">fibonacci</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">fibonacci</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span><span class="p">)</span>
</pre></div>

<h2>once</h2>

<p><code>_.once(function)</code></p>

<p>Creates a version of the function that can only be called one time. Repeated calls to the modified function will have no effect, returning the value from the original call. Useful for initialization functions, instead of having to set a boolean flag and then check it later.</p>

<div class="highlight"><pre><span class="kd">local</span> <span class="n">initialize</span> <span class="o">=</span> <span class="n">_</span><span class="p">.</span><span class="n">once</span><span class="p">(</span><span class="n">createApplication</span><span class="p">)</span>
<span class="n">initialize</span><span class="p">()</span>
<span class="n">initialize</span><span class="p">()</span>
</pre></div>

<h2>after</h2>

<p><code>_.after(count, function)</code></p>

<p>Creates a version of the function that will only be run after first being called count times. Useful for grouping asynchronous responses, where you want to be sure that all the async calls have finished, before proceeding.</p>

<div class="highlight"><pre><span class="kd">local</span> <span class="n">renderNotes</span> <span class="o">=</span> <span class="n">_</span><span class="p">.</span><span class="n">after</span><span class="p">(</span><span class="n">_</span><span class="p">.</span><span class="n">size</span><span class="p">(</span><span class="n">notes</span><span class="p">),</span> <span class="n">render</span><span class="p">)</span>
<span class="n">_</span><span class="p">.</span><span class="n">each</span><span class="p">(</span><span class="n">notes</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="n">note</span><span class="p">)</span>
  <span class="n">note</span><span class="p">.</span><span class="n">asyncSave</span><span class="p">({</span><span class="n">success</span><span class="p">:</span> <span class="n">renderNotes</span><span class="p">})</span>
<span class="k">end</span><span class="p">)</span>
</pre></div>

<h2>bind</h2>

<p><code>_.bind(function, table)</code></p>

<p>Bind a function to a table, meaning that whenever the function is called, the value of self will be the table. </p>

<div class="highlight"><pre><span class="kd">local</span> <span class="n">func</span> <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">greeting</span><span class="p">)</span> <span class="k">return</span> <span class="n">greeting</span> <span class="o">..</span> <span class="s1">'</span><span class="s">: '</span> <span class="o">..</span> <span class="n">self</span><span class="p">.</span><span class="n">name</span> <span class="k">end</span>
<span class="n">func</span> <span class="o">=</span> <span class="n">_</span><span class="p">.</span><span class="n">bind</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="p">{</span><span class="n">name</span> <span class="o">=</span> <span class="s1">'</span><span class="s">moe'</span><span class="p">})</span>
<span class="n">func</span><span class="p">(</span><span class="s1">'</span><span class="s">hi'</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="s1">'</span><span class="s">hi: moe'</span>
</pre></div>

<h2>wrap</h2>

<p><code>_.wrap(function, wrapper)</code></p>

<p>Wraps the first function inside of the wrapper function, passing it as the first argument. This allows the wrapper to execute code before and after the function runs, adjust the arguments, and execute it conditionally.</p>

<div class="highlight"><pre><span class="kd">local</span> <span class="n">hello</span> <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="k">return</span> <span class="s2">"</span><span class="s">hello: "</span> <span class="o">+</span> <span class="n">name</span> <span class="k">end</span>
<span class="n">hello</span> <span class="o">=</span> <span class="n">_</span><span class="p">.</span><span class="n">wrap</span><span class="p">(</span><span class="n">hello</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
  <span class="k">return</span> <span class="s2">"</span><span class="s">before, "</span> <span class="o">+</span> <span class="n">func</span><span class="p">(</span><span class="s2">"</span><span class="s">moe"</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"</span><span class="s">, after"</span>
<span class="k">end</span><span class="p">)</span>
<span class="n">hello</span><span class="p">()</span>
<span class="o">=&gt;</span> <span class="s1">'</span><span class="s">before, hello: moe, after'</span>
</pre></div>

<h2>compose</h2>

<p><code>_.compose(*functions)</code></p>

<p>Returns the composition of a list of functions, where each function consumes the return value of the function that follows. In math terms, composing the functions f(), g(), and h() produces f(g(h())).</p>

<div class="highlight"><pre><span class="kd">local</span> <span class="n">greet</span>    <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="k">return</span> <span class="s2">"</span><span class="s">hi: "</span> <span class="o">+</span> <span class="n">name</span> <span class="k">end</span>
<span class="kd">local</span> <span class="n">exclaim</span>  <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="n">statement</span><span class="p">)</span> <span class="k">return</span> <span class="n">statement</span> <span class="o">+</span> <span class="s2">"</span><span class="s">!"</span> <span class="k">end</span>
<span class="kd">local</span> <span class="n">welcome</span> <span class="o">=</span> <span class="n">_</span><span class="p">.</span><span class="n">compose</span><span class="p">(</span><span class="n">exclaim</span><span class="p">,</span> <span class="n">greet</span><span class="p">)</span>
<span class="n">welcome</span><span class="p">(</span><span class="s1">'</span><span class="s">moe'</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="s1">'</span><span class="s">hi: moe!'</span>
</pre></div>

<h1>Objects</h1>

<h2>keys</h2>

<p><code>_.keys(object)</code></p>

<p>Retrieve all the names of the object's properties. The order of the keys is not guaranteed to be consistent.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">keys</span><span class="p">({</span><span class="n">one</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">two</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">three</span><span class="o">=</span><span class="mi">3</span><span class="p">})</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="s2">"</span><span class="s">one"</span><span class="p">,</span> <span class="s2">"</span><span class="s">two"</span><span class="p">,</span> <span class="s2">"</span><span class="s">three"</span><span class="p">}</span>
</pre></div>

<h2>values</h2>

<p><code>_.values(object)</code></p>

<p>Return all of the values of the object's properties. The order of the values is not guaranteed to be consistent.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">values</span><span class="p">({</span><span class="n">one</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">two</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">three</span><span class="o">=</span><span class="mi">3</span><span class="p">})</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">}</span>
</pre></div>

<h2>pairs</h2>

<p><code>_.pairs(object)</code></p>

<p>Convert an object into a list of [key, value] pairs.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">pairs</span><span class="p">({</span><span class="n">one</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">two</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">three</span><span class="o">=</span><span class="mi">3</span><span class="p">})</span>
<span class="o">=&gt;</span> <span class="s">[["one", 1], ["two", 2], ["three", 3]]</span>
</pre></div>

<h2>invert</h2>

<p><code>_.invert(object)</code></p>

<p>Returns a copy of the object where the keys have become the values and the values the keys. For this to work, all of your object's values should be unique and string serializable.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">invert</span><span class="p">({</span><span class="n">Moe</span><span class="o">=</span><span class="s2">"</span><span class="s">Moses"</span><span class="p">,</span> <span class="n">Larry</span><span class="o">=</span><span class="s2">"</span><span class="s">Louis"</span><span class="p">,</span> <span class="n">Curly</span><span class="o">=</span><span class="s2">"</span><span class="s">Jerome"</span><span class="p">})</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="n">Moses</span><span class="o">=</span><span class="s2">"</span><span class="s">Moe"</span><span class="p">,</span> <span class="n">Louis</span><span class="o">=</span><span class="s2">"</span><span class="s">Larry"</span><span class="p">,</span> <span class="n">Jerome</span><span class="o">=</span><span class="s2">"</span><span class="s">Curly"</span><span class="p">}</span>
</pre></div>

<h2>functions</h2>

<p><code>_.functions(object)</code> Alias: methods</p>

<p>Returns a sorted list of the names of every method in an object — that is to say, the name of every function property of the object.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">functions</span><span class="p">(</span><span class="n">_</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="s2">"</span><span class="s">all"</span><span class="p">,</span> <span class="s2">"</span><span class="s">any"</span><span class="p">,</span> <span class="s2">"</span><span class="s">bind"</span><span class="p">,</span> <span class="s2">"</span><span class="s">bindAll"</span><span class="p">,</span> <span class="s2">"</span><span class="s">clone"</span><span class="p">,</span> <span class="s2">"</span><span class="s">compact"</span><span class="p">,</span> <span class="s2">"</span><span class="s">compose"</span> <span class="o">...</span> <span class="p">}</span>
</pre></div>

<h2>extend</h2>

<p><code>_.extend(destination, *sources)</code></p>

<p>Copy all of the properties in the source objects over to the destination object, and return the destination object. It's in-order, so the last source will override properties of the same name in previous arguments.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">extend</span><span class="p">({</span><span class="n">name</span><span class="o">=</span><span class="s1">'</span><span class="s">moe'</span><span class="p">},</span> <span class="p">{</span><span class="n">age</span><span class="o">=</span><span class="mi">50</span><span class="p">})</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="n">name</span><span class="o">=</span><span class="s1">'</span><span class="s">moe'</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">50</span><span class="p">}</span>
</pre></div>

<h2>pick</h2>

<p><code>_.pick(object, *keys)</code></p>

<p>Return a copy of the object, filtered to only have values for the whitelisted keys (or array of valid keys).</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">pick</span><span class="p">({</span><span class="n">name</span><span class="o">=</span><span class="s1">'</span><span class="s">moe'</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">userid</span><span class="o">=</span><span class="s1">'</span><span class="s">moe1'</span><span class="p">},</span> <span class="s1">'</span><span class="s">name'</span><span class="p">,</span> <span class="s1">'</span><span class="s">age'</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="n">name</span><span class="o">=</span><span class="s1">'</span><span class="s">moe'</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">50</span><span class="p">}</span>
</pre></div>

<h2>omit</h2>

<p><code>_.omit(object, *keys)</code></p>

<p>Return a copy of the object, filtered to omit the blacklisted keys (or array of keys).</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">omit</span><span class="p">({</span><span class="n">name</span><span class="o">=</span><span class="s1">'</span><span class="s">moe'</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">userid</span><span class="o">=</span><span class="s1">'</span><span class="s">moe1'</span><span class="p">},</span> <span class="s1">'</span><span class="s">userid'</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="n">name</span><span class="o">=</span><span class="s1">'</span><span class="s">moe'</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">50</span><span class="p">}</span>
</pre></div>

<h2>defaults</h2>

<p><code>_.defaults(object, *defaults)</code></p>

<p>Fill in null and undefined properties in object with values from the defaults objects, and return the object. As soon as the property is filled, further defaults will have no effect.</p>

<div class="highlight"><pre><span class="kd">local</span> <span class="n">iceCream</span> <span class="o">=</span> <span class="p">{</span><span class="n">flavor</span><span class="o">=</span><span class="s2">"</span><span class="s">chocolate"</span><span class="p">}</span>
<span class="n">_</span><span class="p">.</span><span class="n">defaults</span><span class="p">(</span><span class="n">iceCream</span><span class="p">,</span> <span class="p">{</span><span class="n">flavor</span><span class="o">=</span><span class="s2">"</span><span class="s">vanilla"</span><span class="p">,</span> <span class="n">sprinkles</span><span class="o">=</span><span class="s2">"</span><span class="s">lots"</span><span class="p">})</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="n">flavor</span><span class="o">=</span><span class="s2">"</span><span class="s">chocolate"</span><span class="p">,</span> <span class="n">sprinkles</span><span class="o">=</span><span class="s2">"</span><span class="s">lots"</span><span class="p">}</span>
</pre></div>

<h2>clone</h2>

<p><code>_.clone(object)</code></p>

<p>Create a shallow-copied clone of the object. Any nested objects or arrays will be copied by reference, not duplicated.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">clone</span><span class="p">({</span><span class="n">name</span><span class="o">=</span><span class="s1">'</span><span class="s">moe'</span><span class="p">})</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="n">name</span><span class="o">=</span><span class="s1">'</span><span class="s">moe'</span><span class="p">}</span>
</pre></div>

<h2>tap</h2>

<p><code>_.tap(object, interceptor)</code></p>

<p>Invokes interceptor with the object, and then returns object. The primary purpose of this method is to "tap into" a method chain, in order to perform operations on intermediate results within the chain.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">chain</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">200</span><span class="p">])</span>
  <span class="p">:</span><span class="n">filter</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="k">return</span> <span class="n">num</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">end</span><span class="p">)</span>
  <span class="p">:</span><span class="n">tap</span><span class="p">(</span><span class="nb">print</span><span class="p">)</span>
  <span class="c1">--  {2, 200}</span>
  <span class="p">:</span><span class="n">map</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="k">return</span> <span class="n">num</span> <span class="o">*</span> <span class="n">num</span> <span class="k">end</span><span class="p">)</span>
  <span class="p">:</span><span class="n">value</span><span class="p">()</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="mi">4</span><span class="p">,</span> <span class="mi">40000</span><span class="p">}</span>
</pre></div>

<h2>has</h2>

<p><code>_.has(object, key)</code></p>

<p>Does the object contain the given key? Identical to object.hasOwnProperty(key), but uses a safe reference to the hasOwnProperty function, in case it's been overridden accidentally.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">has</span><span class="p">({</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">},</span> <span class="s2">"</span><span class="s">b"</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="kc">true</span>
</pre></div>

<h2>isEqual</h2>

<p>Not yet implemented</p>

<h2>isEmpty</h2>

<p><code>_.isEmpty(object)</code></p>

<p>Returns true if object contains no values.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">isEmpty</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">})</span>
<span class="o">=&gt;</span> <span class="kc">false</span>
<span class="n">_</span><span class="p">.</span><span class="n">isEmpty</span><span class="p">({})</span>
<span class="o">=&gt;</span> <span class="kc">true</span>
</pre></div>

<h2>isArray</h2>

<p><code>_.isArray(object)</code></p>

<p>Returns true if object is an Array.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">isArray</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">})</span>
<span class="o">=&gt;</span> <span class="kc">true</span>
</pre></div>

<h2>isObject</h2>

<p><code>_.isObject(value)</code></p>

<p>Returns true if value is an Object. Note that JavaScript arrays and functions are objects, while (normal) strings and numbers are not.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">isObject</span><span class="p">({})</span>
<span class="o">=&gt;</span> <span class="kc">true</span>
<span class="n">_</span><span class="p">.</span><span class="n">isObject</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="kc">false</span>
</pre></div>

<h2>isFunction</h2>

<p><code>_.isFunction(object)</code></p>

<p>Returns true if object is a Function.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">isFunction</span><span class="p">(</span><span class="nb">print</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="kc">true</span>
</pre></div>

<h2>isString</h2>

<p><code>_.isString(object)</code></p>

<p>Returns true if object is a String.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">isString</span><span class="p">(</span><span class="s2">"</span><span class="s">moe"</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="kc">true</span>
</pre></div>

<h2>isNumber</h2>

<p><code>_.isNumber(object)</code></p>

<p>Returns true if object is a Number (including NaN).</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">isNumber</span><span class="p">(</span><span class="mf">8.4</span> <span class="o">*</span> <span class="mi">5</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="kc">true</span>
</pre></div>

<h2>isFinite</h2>

<p><code>_.isFinite(object)</code></p>

<p>Returns true if object is a finite Number.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">isFinite</span><span class="p">(</span><span class="o">-</span><span class="mi">101</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="kc">true</span>
<span class="n">_</span><span class="p">.</span><span class="n">isFinite</span><span class="p">(</span><span class="nb">math.huge</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="kc">false</span>
</pre></div>

<h2>isBoolean</h2>

<p><code>_.isBoolean(object)</code></p>

<p>Returns true if object is either true or false.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">isBoolean</span><span class="p">(</span><span class="kc">nil</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="kc">false</span>
</pre></div>

<h2>isNaN</h2>

<p><code>_.isNaN(object)</code></p>

<p>Returns true if object is NaN.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">isNaN</span><span class="p">(</span><span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="kc">true</span>
<span class="n">_</span><span class="p">.</span><span class="n">isNaN</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="kc">false</span>
</pre></div>

<h2>isNil</h2>

<p><code>_.isNil(object)</code></p>

<p>Returns true if the value of object is nil.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">isNil</span><span class="p">(</span><span class="kc">nil</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="kc">true</span>
<span class="n">_</span><span class="p">.</span><span class="n">isNil</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="kc">false</span>
</pre></div>

<h1>Utility</h1>

<h2>identity</h2>

<p><code>_.identity(value)</code></p>

<p>Returns the same value that is used as the argument. In math: f(x) = x</p>

<p>This function looks useless, but is used throughout Underscore as a default iterator.</p>

<div class="highlight"><pre><span class="kd">local</span> <span class="n">moe</span> <span class="o">=</span> <span class="p">{</span><span class="n">name</span><span class="o">=</span><span class="s1">'</span><span class="s">moe'</span><span class="p">}</span>
<span class="n">moe</span> <span class="o">==</span> <span class="n">_</span><span class="p">.</span><span class="n">identity</span><span class="p">(</span><span class="n">moe</span><span class="p">);</span>
<span class="o">=&gt;</span> <span class="kc">true</span>
</pre></div>

<h2>times</h2>

<p><code>_.times(n, iterator)</code></p>

<p>Invokes the given iterator function n times. Each invocation of iterator is called with an index argument.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">(</span><span class="mi">3</span><span class="p">).</span><span class="n">times</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="n">genie</span><span class="p">.</span><span class="n">grantWishNumber</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">end</span><span class="p">)</span>
</pre></div>

<h2>random</h2>

<p><code>_.random(min, max)</code></p>

<p>Returns a random integer between min and max, inclusive. If you only pass one argument, it will return a number between 0 and that number.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">random</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="mi">42</span>
</pre></div>

<h2>mixin</h2>

<p><code>_.mixin(object)</code></p>

<p>Allows you to extend Underscore with your own utility functions. Pass a hash of {name: function} definitions to have your functions added to the Underscore object, as well as the OOP wrapper.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">mixin</span><span class="p">({</span>
  <span class="n">capitalize</span><span class="o">=</span><span class="k">function</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">s</span><span class="p">:</span><span class="n">substr</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span><span class="n">upper</span><span class="p">()</span> <span class="o">..</span> <span class="n">s</span><span class="p">:</span><span class="n">substr</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span><span class="n">lower</span><span class="p">()</span>
  <span class="k">end</span>
<span class="p">})</span>
<span class="n">_</span><span class="p">(</span><span class="s2">"</span><span class="s">fabio"</span><span class="p">).</span><span class="n">capitalize</span><span class="p">();</span>
<span class="o">=&gt;</span> <span class="s2">"</span><span class="s">Fabio"</span>
</pre></div>

<h2>uniqueId</h2>

<p><code>_.uniqueId([prefix])</code></p>

<p>Generate a globally-unique id for client-side models or DOM elements that need one. If prefix is passed, the id will be appended to it. Without prefix, returns an integer.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">uniqueId</span><span class="p">(</span><span class="s1">'</span><span class="s">contact_'</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="s1">'</span><span class="s">contact_104'</span>
</pre></div>

<h2>escape</h2>

<p><code>_.escape(string)</code></p>

<p>Escapes a string for insertion into HTML, replacing &amp;, &lt;, &gt;, ", ', and / characters.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">escape</span><span class="p">(</span><span class="s1">'</span><span class="s">Curly, Larry &amp; Moe'</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="s2">"</span><span class="s">Curly, Larry &amp;amp; Moe"</span>
</pre></div>

<h2>unescape</h2>

<p><code>_.unescape(string)</code></p>

<p>Un-escapes a string from HTML to the proper characters  &amp;, &lt;, &gt;, ", ', and /.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">unescape</span><span class="p">(</span><span class="s1">'</span><span class="s">Curly, Larry &amp;amp Moe'</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="s2">"</span><span class="s">Curly, Larry &amp; Moe"</span>
</pre></div>

<h2>result</h2>

<p><code>_.result(object, property)</code></p>

<p>If the value of the named property is a function then invoke it; otherwise, return it.</p>

<div class="highlight"><pre><span class="n">var</span> <span class="n">object</span> <span class="o">=</span> <span class="p">{</span><span class="n">cheese</span><span class="o">=</span><span class="s1">'</span><span class="s">crumpets'</span><span class="p">,</span> <span class="n">stuff</span><span class="o">=</span><span class="k">function</span><span class="p">()</span> <span class="k">return</span> <span class="s1">'</span><span class="s">nonsense'</span> <span class="k">end</span><span class="p">}</span>
<span class="n">_</span><span class="p">.</span><span class="n">result</span><span class="p">(</span><span class="n">object</span><span class="p">,</span> <span class="s1">'</span><span class="s">cheese'</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="s2">"</span><span class="s">crumpets"</span>
<span class="n">_</span><span class="p">.</span><span class="n">result</span><span class="p">(</span><span class="n">object</span><span class="p">,</span> <span class="s1">'</span><span class="s">stuff'</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="s2">"</span><span class="s">nonsense"</span>
</pre></div>

<h1>String</h1>

<h2>split</h2>

<p><code>_.split(value, [separator])</code></p>

<p>Splits a string into an array of strings by separating the string into substrings. If there is no separator is passed, the substring are individual characters.</p>

<p>With a separator, the substring is string up to the separator position. The separator can be a <a href="http://www.lua.org/manual/5.2/manual.html#6.4.1">string pattern</a>.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s2">"</span><span class="s">John Smith"</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="s2">"</span><span class="s">J"</span><span class="p">,</span><span class="s2">"</span><span class="s">o"</span><span class="p">,</span><span class="s2">"</span><span class="s">h"</span><span class="p">,</span><span class="s2">"</span><span class="s">n"</span><span class="p">,</span><span class="s2">"</span><span class="s"> "</span><span class="p">,</span><span class="s2">"</span><span class="s">S"</span><span class="p">,</span><span class="s2">"</span><span class="s">m"</span><span class="p">,</span><span class="s2">"</span><span class="s">i"</span><span class="p">,</span><span class="s2">"</span><span class="s">t"</span><span class="p">,</span><span class="s2">"</span><span class="s">h"</span><span class="p">}</span>
<span class="n">_</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s2">"</span><span class="s">John Smith"</span><span class="p">,</span> <span class="s2">"</span><span class="s">%s+"</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="s2">"</span><span class="s">John"</span><span class="p">,</span> <span class="s2">"</span><span class="s">Smith"</span><span class="p">}</span>
</pre></div>

<h1>Chaining</h1>

<p>You can use Underscore in either an object-oriented or a functional style, depending on your preference. The following two lines of code are identical ways to double a list of numbers.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">.</span><span class="n">map</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="k">function</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">return</span> <span class="n">n</span> <span class="o">*</span> <span class="mi">2</span> <span class="k">end</span><span class="p">)</span>
<span class="n">_</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]).</span><span class="n">map</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">return</span> <span class="n">n</span> <span class="o">*</span> <span class="mi">2</span> <span class="k">end</span><span class="p">)</span>
</pre></div>

<p>Calling chain will cause all future method calls to return wrapped objects. When you've finished the computation, use value to retrieve the final value. Here's an example of chaining together a map/flatten/reduce, in order to get the word count of every word in a song.</p>

<div class="highlight"><pre><span class="kd">local</span> <span class="n">lyrics</span> <span class="o">=</span> <span class="p">{</span>
  <span class="p">{</span><span class="n">line</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">words</span><span class="o">=</span><span class="s2">"</span><span class="s">I'm a lumberjack and I'm okay"</span><span class="p">},</span>
  <span class="p">{</span><span class="n">line</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">words</span><span class="o">=</span><span class="s2">"</span><span class="s">I sleep all night and I work all day"</span><span class="p">},</span>
  <span class="p">{</span><span class="n">line</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">words</span><span class="o">=</span><span class="s2">"</span><span class="s">He's a lumberjack and he's okay"</span><span class="p">},</span>
  <span class="p">{</span><span class="n">line</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">words</span><span class="o">=</span><span class="s2">"</span><span class="s">He sleeps all night and he works all day"</span><span class="p">}</span>
<span class="p">}</span>

<span class="n">_</span><span class="p">.</span><span class="n">chain</span><span class="p">(</span><span class="n">lyrics</span><span class="p">)</span>
  <span class="p">:</span><span class="n">map</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="k">return</span> <span class="n">_</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="n">line</span><span class="p">.</span><span class="n">words</span><span class="p">,</span> <span class="s1">'</span><span class="s"> '</span><span class="p">)</span> <span class="k">end</span><span class="p">)</span>
  <span class="p">:</span><span class="n">flatten</span><span class="p">()</span>
  <span class="p">:</span><span class="n">reduce</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="n">counts</span><span class="p">,</span> <span class="n">word</span><span class="p">)</span>
    <span class="n">counts</span><span class="p">[</span><span class="n">word</span><span class="p">]</span> <span class="o">=</span> <span class="n">counts</span><span class="p">[</span><span class="n">word</span><span class="p">]</span> <span class="ow">or</span> <span class="mi">0</span>
    <span class="n">counts</span><span class="p">[</span><span class="n">word</span><span class="p">]</span> <span class="o">=</span> <span class="n">counts</span><span class="p">[</span><span class="n">word</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">counts</span>
  <span class="k">end</span><span class="p">,</span> <span class="p">{})</span>
  <span class="p">:</span><span class="n">value</span><span class="p">()</span>

<span class="o">=&gt;</span> <span class="p">{</span><span class="n">lumberjack</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">all</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">night</span><span class="o">=</span><span class="mi">2</span> <span class="o">...</span> <span class="p">}</span>
</pre></div>

<h2>chain</h2>

<p><code>_.chain(obj)</code></p>

<p>Returns a wrapped object. Calling methods on this object will continue to return wrapped objects until value is used.</p>

<div class="highlight"><pre><span class="kd">local</span> <span class="n">stooges</span> <span class="o">=</span> <span class="p">{{</span><span class="n">name</span><span class="o">=</span><span class="s1">'</span><span class="s">curly'</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">25</span><span class="p">},</span> <span class="p">{</span><span class="n">name</span><span class="o">=</span><span class="s1">'</span><span class="s">moe'</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">21</span><span class="p">},</span> <span class="p">{</span><span class="n">name</span><span class="o">=</span><span class="s1">'</span><span class="s">larry'</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">23</span><span class="p">}}</span>
<span class="kd">local</span> <span class="n">youngest</span> <span class="o">=</span> <span class="n">_</span><span class="p">.</span><span class="n">chain</span><span class="p">(</span><span class="n">stooges</span><span class="p">)</span>
  <span class="p">:</span><span class="n">sortBy</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="n">stooge</span><span class="p">)</span> <span class="k">return</span> <span class="n">stooge</span><span class="p">.</span><span class="n">age</span> <span class="k">end</span><span class="p">)</span>
  <span class="p">:</span><span class="n">map</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="n">stooge</span><span class="p">)</span> <span class="k">return</span> <span class="n">stooge</span><span class="p">.</span><span class="n">name</span> <span class="o">..</span> <span class="s1">'</span><span class="s"> is '</span> <span class="o">..</span> <span class="n">stooge</span><span class="p">.</span><span class="n">age</span> <span class="k">end</span><span class="p">)</span>
  <span class="p">:</span><span class="n">first</span><span class="p">()</span>
  <span class="p">:</span><span class="n">value</span><span class="p">()</span>
<span class="o">=&gt;</span> <span class="s2">"</span><span class="s">moe is 21"</span>
</pre></div>

<h2>value</h2>

<p><code>_(obj).value()</code></p>

<p>Extracts the value of a wrapped object.</p>

<div class="highlight"><pre><span class="n">_</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">}).</span><span class="n">value</span><span class="p">();</span>
<span class="o">=&gt;</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">}</span>
</pre></div>

<h1>Changelog</h1>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Underscore-lua maintained by <a href="https://github.com/jtarchie">jtarchie</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
